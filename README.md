# golang的嵌套事务管理

golang的事务管理是一件很麻烦的事，，能不能像Java那样，支持多层的事务嵌套，最近琢磨了一下，写了一个demo,用来管理golang的事务，使其支持golang事务的嵌套调用。

其思想很简单，对于所有的写数据库操作，如果发现事务是开启的，就以事务方式执行数据库操作，如果事务没有开启，就以非事务的方式执行数据库操作。对于所有的读数据库的操作，都已非事务的方式进行（用以提高数据库的执行的性能）。

对于嵌套事务的执行，流程大体是这样的：

在第一次开启事务的时候，记录下来开启事务时函数，对于后面的开启事务操作，不进行任何操作，在提交事务的时候，判断提交事务所处的函数是否和打开事务的函数一致，如果函数不一致，就不提交事务，如果函数一致，就提交事务。



